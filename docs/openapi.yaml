openapi: 3.0.3
info:
  title: JM Showroomer API
  version: 1.0.0
  description: |
    **Docs Navigation (Flutter + Product + Backend)**

    - **SHOWROOMS_MVP1_SEARCH.md**  
      For Flutter: detailed showroom search logic (modes, cursor, geo, fallback, constraints).  
      Value: correct client-side search implementation aligned with backend behavior.  
      <a href="https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/SHOWROOMS_MVP1_SEARCH.md" target="_blank" rel="noopener noreferrer">Open document</a>

    - **CURSOR_PAGINATION_FLUTTER.md**  
      For Flutter: universal cursor pagination rules for all backend list endpoints (opaque token, reset rules, error handling).  
      Value: correct infinite scroll implementation without duplicates/skips/cursor misuse.  
      <a href="https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/CURSOR_PAGINATION_FLUTTER.md" target="_blank" rel="noopener noreferrer">Open document</a>

    - **ADMIN_PENDING_QUEUE_CURSOR.md**  
      For Flutter Admin Panel: how to use cursor pagination for the pending moderation queue (`/admin/showrooms?status=pending`).  
      Value: correct infinite scroll behavior without duplicates, skips, or cursor misuse.  
      <a href="https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/ADMIN_PENDING_QUEUE_CURSOR.md" target="_blank" rel="noopener noreferrer">Open document</a>

    - **README_UA.md**  
      For PM/client: business logic and key product flows in plain language.  
      Value: clear understanding of system behavior without technical implementation details.  
      <a href="https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/README_UA.md" target="_blank" rel="noopener noreferrer">Open document</a>

    - **README_DETAIL.md**  
      For Flutter: full integration specification for routes, states, validation, error codes, and rules.  
      Value: fewer API clarification rounds and stable integration from the first iteration.  
      <a href="https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/README_DETAIL.md" target="_blank" rel="noopener noreferrer">Open document</a>

    - **README_BACKEND_MAP_UA.md**  
      Detailed backend map: modules, dependencies, layers, responsibilities, key invariants.  
      Value: fast navigation across the codebase during development and review.  
      <a href="https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/README_BACKEND_MAP_UA.md" target="_blank" rel="noopener noreferrer">Open document</a>

    - **ANALYTICS_CONTRACT.md**  
      For Flutter + Backend: analytics ingest contract, event origins, anti-duplication rules, session/anonymous identity responsibilities.  
      Value: safe client analytics integration without duplicating backend-generated events.  
      <a href="https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/ANALYTICS_CONTRACT.md" target="_blank" rel="noopener noreferrer">Open document</a>
  license:
    name: UNLICENSED
    url: https://unlicense.org/
servers:
  - url: /api/v1

paths:
  /health:
    $ref: './common.yaml#/paths/~1health'

  /auth/oauth:
    $ref: './auth.yaml#/paths/~1auth~1oauth'

  /users/me:
    $ref: './users.yaml#/paths/~1users~1me'
  /users/me/notifications:
    $ref: './users.yaml#/paths/~1users~1me~1notifications'
  /users/me/notifications/unread-count:
    $ref: './users.yaml#/paths/~1users~1me~1notifications~1unread-count'
  /users/me/notifications/{notificationId}/read:
    $ref: './users.yaml#/paths/~1users~1me~1notifications~1{notificationId}~1read'
  /users/me/devices:
    $ref: './users.yaml#/paths/~1users~1me~1devices'
  /users/me/devices/{deviceId}:
    $ref: './users.yaml#/paths/~1users~1me~1devices~1{deviceId}'
  /users/complete-onboarding:
    $ref: './users.yaml#/paths/~1users~1complete-onboarding'
  /users/complete-owner-profile:
    $ref: './users.yaml#/paths/~1users~1complete-owner-profile'
  /users/profile:
    $ref: './users.yaml#/paths/~1users~1profile'
  /users/dev/register-test:
    $ref: './users.yaml#/paths/~1users~1dev~1register-test'
  /users/dev/make-owner:
    $ref: './users.yaml#/paths/~1users~1dev~1make-owner'

  /showrooms:
    $ref: './showrooms.yaml#/paths/~1showrooms'
  /showrooms/suggestions:
    $ref: './showrooms.yaml#/paths/~1showrooms~1suggestions'
  /showrooms/counters:
    $ref: './showrooms.yaml#/paths/~1showrooms~1counters'
  /showrooms/create:
    $ref: './showrooms.yaml#/paths/~1showrooms~1create'
  /showrooms/draft:
    $ref: './showrooms.yaml#/paths/~1showrooms~1draft'
  /showrooms/{id}:
    $ref: './showrooms.yaml#/paths/~1showrooms~1{id}'
  /showrooms/{id}/submit:
    $ref: './showrooms.yaml#/paths/~1showrooms~1{id}~1submit'
  /showrooms/{id}/favorite:
    $ref: './showrooms.yaml#/paths/~1showrooms~1{id}~1favorite'

  /collections/favorites/showrooms:
    $ref: './users.yaml#/paths/~1collections~1favorites~1showrooms'
  /collections/favorites/showrooms/sync:
    $ref: './users.yaml#/paths/~1collections~1favorites~1showrooms~1sync'
  /collections/favorites/lookbooks:
    $ref: './users.yaml#/paths/~1collections~1favorites~1lookbooks'
  /collections/favorites/lookbooks/sync:
    $ref: './users.yaml#/paths/~1collections~1favorites~1lookbooks~1sync'
  /collections/want-to-visit/events:
    $ref: './users.yaml#/paths/~1collections~1want-to-visit~1events'
  /collections/want-to-visit/events/sync:
    $ref: './users.yaml#/paths/~1collections~1want-to-visit~1events~1sync'

  /admin/showrooms:
    $ref: './admin.yaml#/paths/~1admin~1showrooms'
  /admin/showrooms/{id}:
    $ref: './admin.yaml#/paths/~1admin~1showrooms~1{id}'
  /admin/showrooms/{id}/history:
    $ref: './admin.yaml#/paths/~1admin~1showrooms~1{id}~1history'
  /admin/showrooms/{id}/stats:
    $ref: './admin.yaml#/paths/~1admin~1showrooms~1{id}~1stats'
  /admin/showrooms/{id}/approve:
    $ref: './admin.yaml#/paths/~1admin~1showrooms~1{id}~1approve'
  /admin/showrooms/{id}/reject:
    $ref: './admin.yaml#/paths/~1admin~1showrooms~1{id}~1reject'

  /lookbooks:
    $ref: './lookbooks.yaml#/paths/~1lookbooks'
  /lookbooks/{id}:
    $ref: './lookbooks.yaml#/paths/~1lookbooks~1{id}'
  /lookbooks/create:
    $ref: './lookbooks.yaml#/paths/~1lookbooks~1create'
  /lookbooks/{id}/favorite:
    $ref: './lookbooks.yaml#/paths/~1lookbooks~1{id}~1favorite'
  /lookbooks/{id}/rsvp:
    $ref: './lookbooks.yaml#/paths/~1lookbooks~1{id}~1rsvp'
  /events:
    $ref: './events.yaml#/paths/~1events'
  /events/{id}:
    $ref: './events.yaml#/paths/~1events~1{id}'
  /events/{id}/want-to-visit:
    $ref: './events.yaml#/paths/~1events~1{id}~1want-to-visit'
  /events/{id}/dismiss:
    $ref: './events.yaml#/paths/~1events~1{id}~1dismiss'
  /events/{id}/rsvp:
    $ref: './events.yaml#/paths/~1events~1{id}~1rsvp'
  /analytics/ingest:
    $ref: './analytics.yaml#/paths/~1analytics~1ingest'

tags:
  - name: Health
    description: Service liveness endpoint.
  - name: Auth
    description: Authentication via Firebase ID token.
    externalDocs:
      description: Full integration detail
      url: https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/README_DETAIL.md
  - name: Users
    description: User profile, onboarding, notifications, and devices.
    externalDocs:
      description: Full integration detail
      url: https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/README_DETAIL.md
  - name: Collections
    description: Favorites and want-to-visit collections with guest->auth sync endpoints.
    externalDocs:
      description: Full integration detail
      url: https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/README_DETAIL.md
  - name: Showrooms
    description: Showroom lifecycle, listing, moderation state, favorites, search.
    externalDocs:
      description: Showrooms search and geo rules (Flutter)
      url: https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/SHOWROOMS_MVP1_SEARCH.md
  - name: Lookbooks
    description: Lookbooks list/detail/create/update/favorites.
    externalDocs:
      description: Full integration detail
      url: https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/README_DETAIL.md
  - name: Events
    description: Events list/detail, want-to-visit and dismiss state.
    externalDocs:
      description: Full integration detail
      url: https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/README_DETAIL.md
  - name: Admin
    description: Admin moderation endpoints for showrooms.
    externalDocs:
      description: Admin pending queue cursor guide (Flutter)
      url: https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/ADMIN_PENDING_QUEUE_CURSOR.md
  - name: Analytics
    description: Client analytics ingest endpoint and backend analytics contract references.
    externalDocs:
      description: Analytics contract (Flutter + Backend)
      url: https://github.com/echocode-app/jm-showroomer-back/blob/main/docs/readme/ANALYTICS_CONTRACT.md

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ApiSuccess:
      $ref: './common.yaml#/components/schemas/ApiSuccess'
    ApiError:
      $ref: './common.yaml#/components/schemas/ApiError'
    Error:
      $ref: './common.yaml#/components/schemas/Error'
    NotificationType:
      $ref: './common.yaml#/components/schemas/NotificationType'
    Notification:
      $ref: './common.yaml#/components/schemas/Notification'
    HealthResponse:
      $ref: './common.yaml#/components/schemas/HealthResponse'
    OAuthLoginInput:
      $ref: './auth.yaml#/components/schemas/OAuthLoginInput'
    AnalyticsClientEventInput:
      $ref: './analytics.yaml#/components/schemas/AnalyticsClientEventInput'
    AnalyticsIngestInput:
      $ref: './analytics.yaml#/components/schemas/AnalyticsIngestInput'
    AnalyticsIngestResult:
      $ref: './analytics.yaml#/components/schemas/AnalyticsIngestResult'
    User:
      $ref: './users.yaml#/components/schemas/User'
    CompleteOnboardingInput:
      $ref: './users.yaml#/components/schemas/CompleteOnboardingInput'
    CompleteOwnerProfileInput:
      $ref: './users.yaml#/components/schemas/CompleteOwnerProfileInput'
    DeviceRegisterRequest:
      $ref: './users.yaml#/components/schemas/DeviceRegisterRequest'
    DeviceResponse:
      $ref: './users.yaml#/components/schemas/DeviceResponse'
    Contacts:
      $ref: './showrooms.yaml#/components/schemas/Contacts'
    Location:
      $ref: './showrooms.yaml#/components/schemas/Location'
    GeoCoords:
      $ref: './showrooms.yaml#/components/schemas/GeoCoords'
    GeoLocation:
      $ref: './showrooms.yaml#/components/schemas/GeoLocation'
    Showroom:
      $ref: './showrooms.yaml#/components/schemas/Showroom'
    CreateShowroomInput:
      $ref: './showrooms.yaml#/components/schemas/CreateShowroomInput'
    UpdateShowroomInput:
      $ref: './showrooms.yaml#/components/schemas/UpdateShowroomInput'
    Event:
      $ref: './events.yaml#/components/schemas/Event'
    Lookbook:
      $ref: './lookbooks.yaml#/components/schemas/Lookbook'
